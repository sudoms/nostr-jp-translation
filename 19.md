# NIP-19: bech32 でエンコードされたエンティティ

`draft` `optional` `author:jb55` `author:fiatjaf` `author:Semisol`

この NIP は、bech32 でエンコードされた全てのエンティティを指定する。

## Bare key と ID

秘密鍵、公開鍵、イベント ID が全て 32 バイトの文字列であることによる誤解や取り違えを防ぐため、
これらの各々について、異なる接頭辞を持つ bech32-(not-m) エンコーディングを使用することができる。

以下の bech32 接頭辞を用いることが可能である。

- `npub`：公開鍵
- `nsec`：秘密鍵
- `note`：ノート ID

例：16 進数の公開鍵 `3bf0c63fcb93463407af97a5e5ee64fa883d107ef9e558472c4eb9aaaefa459d` は、
`npub180cvv07tjdrrgpa0j7j7tmnyl2yr6yr7l8j4s3evf6u64th6gkwsyjh6w6` に変換できる。

鍵および ID の bech32 エンコーディングは、標準の NIP-01 イベントフォーマット、
もしくはフィルターの内部処理に使用されることを意図しておらず、もっぱら人が見やすい表示と入力に供するためのものである。
とはいえクライアントは hex と npub の両形式の鍵を受け入れ、内部で変換できる必要がある。

## 追加のメタデータを含む共有可能な識別子

プロファイルまたはイベントを共有するにあたり、アプリケーションがリレーの情報やその他メタデータを含めることで、
他のアプリケーションがこれらのエンティティを、容易に発見・表示するための手がかりを提供できる。

これらのイベントの内容は、`TLV` (type-length-value) の二進数でエンコードされたリストである。
うち `T` と `L` はそれぞれ 1 バイトのデータ長をもつ（`uint8` つまり 0--255 の範囲）。
一方 `V` は、`L` で示されたサイズに一致するバイト長のシーケンスである。

`TLV` 形式で表現可能な bech32 接頭辞が以下である。

- `nprofile`：nostr プロファイル
- `nevent`：nostr イベント

標準化された `TLV` タイプの例は以下のようなものである。

- `0`: `special`
    - bech32 接頭辞に依存：
        - `nprofile` の場合、 32 バイトのプロファイル公開鍵
        - `nevent` の場合、32 バイトのイベント ID
- `1`: `relay`
    - 当該エンティティ（プロファイルまたはイベント）を見つけられるであろうリレー。
    UTF-8 でエンコードしておく。複数のリレーを教唆するために、これが複数回繰り返されることがある。
